{"version":3,"sources":["pages/Home/Home.tsx","api/index.ts","utils.ts","compoents/CustomerSeats.tsx","pages/Order/ChooseSeat.tsx","compoents/AllDish.tsx","pages/Order/SetOrder.tsx","pages/Admin/Login.tsx","compoents/AdminHeader.tsx","compoents/ModifyDishMenu.tsx","pages/Admin/DishManage.tsx","pages/Admin/StatusManage.tsx","router.tsx","App.tsx","index.tsx"],"names":["Home","props","Object","classCallCheck","this","possibleConstructorReturn","getPrototypeOf","call","react_default","a","createElement","className","react_router_dom","to","React","Component","SingletonApi","_domain","url","fetch","mode","method","then","response","json","data","body","headers","content-type","commfetchGetFunc","concat","commfetchPostFunc","JSON","stringify","console","log","seatId","_instance","StorageType","Instance","localStorage","createClass","key","value","t","window","getItem","v","setItem","setCookie","name","exp","Date","setTime","getTime","h","document","cookie","escape","toUTCString","isAdmin","reg","RegExp","match","CustomerSeats","_this","state","seat","fetchData","api","getOrderSeats","res","setState","e","currentTarget","dataset","location","replace","seatid","isCanUse","data-seatid","onClick","bindHandleClick","type","style","backgroundColor","bindHandleIn","id","getPlaceholder","code","setlocalStorage","_this2","map","item","index","createButton","ChooseSeat","getlocalStorage","compoents_CustomerSeats","Column","AllDish","dataSource","orderForm","total","bind","assertThisInitialized","changeOrder","postOrder","calculateTotal","settlement","bindRefund","goBack","setQuerySeatId","r","search","substr","unescape","GetQueryString","getAllDish","getOrderForm","i","_iterator2","Symbol","iterator","_iteratorNormalCompletion2","_step2","next","done","j","count","dish","badge","margin","height","fontSize","padding","tag","color","cache","_iteratorNormalCompletion3","_didIteratorError3","_iteratorError3","undefined","_step3","_iterator3","price","err","return","_iteratorNormalCompletion4","_didIteratorError4","_iteratorError4","_step4","_iterator4","parseInt","_iteratorNormalCompletion5","_didIteratorError5","_iteratorError5","_step5","_iterator5","push","message","error","time","toLocaleString","list","notification","open","description","duration","getSeatClose","success","setTimeout","getRefund","_this3","_this4","es_button","statistic","title","countBadge","table","rowKey","dataIndex","render","tags","text","record","input_number","min","max","defaultValue","onChange","SetOrder","param","UrlParamSeatId","arguments","length","urlParams","jump","es_alert","showIcon","compoents_AllDish","Login","userName","passWord","handelUserChange","handelPasswdChange","bindLoginClick","postTryLogin","href","alert","autoComplete","placeholder","AdminHeader","Option","es_select","ModifyMenu","func","classify","handelChange","handelSub","postManageDish","reload","width","input","data-flag","step","icon","DishManage","compoents_AdminHeader","ModifyDishMenu","react_router","StatusManage","totalRevenue","subscription","refund","getStatus","row","gutter","col","span","prefix","suffix","Router","exact","path","component","App","router","ReactDOM","src_App","getElementById"],"mappings":"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","file":"static/js/main.174d6a9a.chunk.js","sourcesContent":["import React from 'react';\r\n//import { store } from \"../../redux/store\";\r\nimport { Link } from \"react-router-dom\";\r\nimport \"../../styles/home.css\";\r\n\r\nclass Home extends React.Component {\r\n    constructor(props: any) {\r\n        super(props);\r\n        //this.state = store.getState();\r\n    }\r\n    render() {\r\n        return (\r\n            <div className=\"home\">\r\n                <header className=\"home-header\">\r\n                    <h3>yanglisha</h3>\r\n                </header>\r\n                <article className=\"home-article home-wrapper\">\r\n\r\n                    <section className=\"select-service\">\r\n                        <h3><Link to=\"/order/choose-seat\">用户下单</Link></h3>\r\n                    </section>\r\n\r\n                    <section className=\"select-service\">\r\n                        <h3><Link to=\"/admin/dish-manage\">后台管理</Link></h3>\r\n                    </section>\r\n\r\n                </article>\r\n\r\n            </div>\r\n        )\r\n    }\r\n}\r\n\r\nexport default Home;","import { ISeat, ILoginForm, ISiga, IManageDish, IDish, I0rder, IStatus } from \"../types/interface\";\r\n\r\ninterface IApi {\r\n    getOrderSeats(): Promise<Array<ISeat>>,\r\n    postTryLogin(data: ILoginForm): Promise<ISiga>,\r\n    postManageDish(data: IManageDish): Promise<ISiga>,\r\n    getAllDish(): Promise<Array<IDish>>,\r\n    getPlaceholder(seatId: number | string): Promise<ISiga>,\r\n    postOrder(data: I0rder): Promise<ISiga>,\r\n    getOrderForm(seatId: string): Promise<Array<IDish>>;\r\n    getSeatClose(seatId: string): Promise<ISiga>,\r\n    getRefund(seatId: string): Promise<ISiga>,\r\n    getStatus(): Promise<IStatus>,\r\n}\r\n\r\n// 单例模式\r\nclass SingletonApi implements IApi {\r\n    private constructor() {\r\n        this._domain = \"\";\r\n    };\r\n    private _domain: string;\r\n    private static _instance: IApi;\r\n\r\n    private commfetchGetFunc(url: string): Promise<any> {\r\n        return fetch(url, {\r\n            mode: \"cors\",\r\n            method: \"GET\",\r\n        }).then(response => {\r\n            return response.json()\r\n        })\r\n    }\r\n\r\n    private commfetchPostFunc(url: string, data: string): Promise<any> {\r\n        return fetch(url, {\r\n            mode: \"cors\",\r\n            method: \"POST\",\r\n            body: data,\r\n            headers: {\r\n                'content-type': 'application/json'\r\n            },\r\n        }).then(response => {\r\n            return response.json()\r\n        })\r\n    }\r\n\r\n    public getOrderSeats(): Promise<Array<ISeat>> {\r\n        return this.commfetchGetFunc(`${this._domain}/api/Order/ChooseSeat`);\r\n    }\r\n\r\n    public postTryLogin(data: ILoginForm): Promise<ISiga> {\r\n        return this.commfetchPostFunc(`${this._domain}/api/admin/login`, JSON.stringify(data));\r\n    }\r\n\r\n    public postManageDish(data: IManageDish): Promise<ISiga> {\r\n        return this.commfetchPostFunc(`${this._domain}/api/admin/dish`, JSON.stringify(data));\r\n    }\r\n\r\n    public getAllDish(): Promise<Array<IDish>> {\r\n        return this.commfetchGetFunc(`${this._domain}/api/order/getdish`);\r\n    }\r\n\r\n    public postOrder(data: I0rder): Promise<ISiga> {\r\n        console.log(JSON.stringify(data));\r\n        return this.commfetchPostFunc(`${this._domain}/api/order/updateorderform`, JSON.stringify(data));\r\n    }\r\n\r\n    public getPlaceholder(seatId: number | string): Promise<ISiga> {\r\n        return this.commfetchGetFunc(`${this._domain}/api/order/placeholder?seatId=${seatId}`);\r\n    }\r\n\r\n    public getOrderForm(seatId: string): Promise<Array<IDish>> {\r\n        return this.commfetchGetFunc(`${this._domain}/api/order/orderForm?seatId=${seatId}`);\r\n    }\r\n\r\n    public getSeatClose(seatId: string): Promise<ISiga> {\r\n        return this.commfetchGetFunc(`${this._domain}/api/order/PlaceClose?seatId=${seatId}`);\r\n    }\r\n\r\n    public getRefund(seatId: string): Promise<ISiga> {\r\n        return this.commfetchGetFunc(`${this._domain}/api/order/Refund?seatId=${seatId}`);\r\n    }\r\n\r\n    public getStatus(): Promise<IStatus> {\r\n        return this.commfetchGetFunc(`${this._domain}/api/admin/Statistics`);\r\n    }\r\n    public static Instance(): IApi {\r\n        if (!this._instance) {\r\n            this._instance = new SingletonApi();\r\n        }\r\n        return this._instance;\r\n    }\r\n}\r\n\r\nexport default SingletonApi.Instance();","\r\nexport enum StorageType {\r\n    seatId,\r\n}\r\n\r\nexport class localStorage {\r\n    static getlocalStorage(t: StorageType) {\r\n        switch (t) {\r\n            case StorageType.seatId:\r\n                return window.localStorage.getItem(\"seatId\");\r\n        }\r\n    }\r\n    static setlocalStorage(t: StorageType, v: string) {\r\n        switch (t) {\r\n            case StorageType.seatId:\r\n                return window.localStorage.setItem(\"seatId\", v);\r\n        }\r\n    }\r\n}\r\n\r\nexport function setCookie(name: string, value: string) {\r\n    var h = 0.5;\r\n    var exp = new Date();\r\n    exp.setTime(exp.getTime() + h * 60 * 60 * 1000);\r\n    document.cookie = name + \"=\" + escape(value) + \";expires=\" + exp.toUTCString() + \";path=/\";\r\n}\r\n\r\nexport function isAdmin(): boolean {\r\n    let cookie = document.cookie;\r\n    let reg = new RegExp(\"admin=ok\");\r\n    let key = cookie.match(reg);\r\n    if (key == null) {\r\n        return false\r\n    }\r\n    return true;\r\n}\r\n\r\nexport function GetQueryString(name: string) {\r\n    var reg = new RegExp(\"(^|&)\" + name + \"=([^&]*)(&|$)\");\r\n    var r = window.location.search.substr(1).match(reg);//search,查询？后面的参数，并匹配正则\r\n    if (r != null) return unescape(r[2]); return null;\r\n}\r\n","import React from \"react\";\r\nimport api from \"../api\";\r\nimport { ISeat, IProps } from \"../types/interface\";\r\nimport { localStorage, StorageType } from \"../utils\";\r\n\r\ninterface State {\r\n    seat: Array<ISeat>,\r\n}\r\n\r\n\r\nclass CustomerSeats extends React.Component<IProps, State> {\r\n    constructor(props: any) {\r\n        super(props)\r\n        this.state = {\r\n            seat: [],\r\n        }\r\n    }\r\n    // 生命周期钩子\r\n    public componentDidMount() {\r\n        this.fetchData();\r\n    }\r\n    // 获取后台数据\r\n    private async fetchData() {\r\n        let res: ISeat[] = await api.getOrderSeats();\r\n        this.setState({\r\n            seat: res\r\n        })\r\n\r\n    }\r\n    private bindHandleIn(e:any){\r\n        let seatId = e.currentTarget.dataset[\"seatid\"];\r\n        if(seatId == null){\r\n            return;\r\n        }\r\n        window.location.replace(`/order/set-order?seatId=${seatId}`);\r\n    }\r\n    // 根据是否可使用创建button\r\n    private createButton(seatid: number, isCanUse: boolean): JSX.Element {\r\n        if (isCanUse) {\r\n            return <button className=\"buttonCanUse\" data-seatid={seatid} onClick={this.bindHandleClick} type=\"button\"> 选位 </button>\r\n        }\r\n        return <button style={{backgroundColor:\"rgb(92, 92, 92)\"}} className=\"buttonNotCanUse\" data-seatid={seatid} type=\"button\" onClick={this.bindHandleIn}> 已满 </button>\r\n    }\r\n\r\n    private bindHandleClick(e: React.MouseEvent<HTMLButtonElement, MouseEvent>) {\r\n        let seatId = e.currentTarget.dataset[\"seatid\"];\r\n\r\n        let id = seatId ? seatId : \"-1\";\r\n\r\n        api.getPlaceholder(id).then((res) => {\r\n            if (res.code === \"success\") {\r\n                localStorage.setlocalStorage(StorageType.seatId, id);\r\n                window.location.replace(`/order/set-order?seatId=${id}`);\r\n            }\r\n        })\r\n\r\n    }\r\n\r\n    render() {\r\n        return (\r\n            <article className=\"choose-seat-container\">\r\n                {\r\n                    // 渲染座位列表\r\n                    this.state.seat.map((item, index) => {\r\n                        return (\r\n                            <section key={index} className=\"seat-modul\" >\r\n                                <h3>座位号：{item.id}</h3>\r\n                                {this.createButton(item.id, item.isCanUse)}\r\n                            </section>\r\n                        )\r\n                    })\r\n                }\r\n            </article>\r\n        )\r\n    }\r\n}\r\n\r\nexport default CustomerSeats;","import React from 'react';\r\nimport { Link } from \"react-router-dom\";\r\nimport { Redirect } from \"react-router-dom\";\r\nimport CustomerSeats from \"../../compoents/CustomerSeats\"\r\nimport { localStorage, StorageType } from \"../../utils\";\r\nimport \"../../styles/chooseSeat.css\"\r\nimport { IProps } from \"../../types/interface\";\r\n\r\nclass ChooseSeat extends React.Component<IProps> {\r\n    constructor(props: IProps) {\r\n        super(props);\r\n    }\r\n\r\n    // 判断是否跳转\r\n    private ifJump(): string | null {\r\n        let seatId = localStorage.getlocalStorage(StorageType.seatId);\r\n        if (seatId != null) {\r\n            return seatId;\r\n        }\r\n        return null;\r\n    }\r\n\r\n\r\n    public render() {\r\n        // let seatId = this.ifJump();\r\n        // if (seatId != null) {\r\n        //     return <Redirect to={`/order/set-order?seatId=${seatId}`}></Redirect>\r\n        // }\r\n\r\n        return (\r\n            <div className=\"choose-seat\">\r\n                <header className=\"choose-seat-header\">\r\n                    <nav className=\"header-nav\">\r\n                        <Link to=\"/\"><strong>返回首页</strong></Link>\r\n                    </nav>\r\n                </header>\r\n\r\n                <CustomerSeats {...this.props}></CustomerSeats>\r\n\r\n            </div>\r\n        )\r\n    }\r\n}\r\n\r\nexport default ChooseSeat;","import React from \"react\";\r\nimport api from \"../api/index\";\r\nimport { GetQueryString } from \"../utils\";\r\nimport { IDish } from \"../types/interface\";\r\nimport { Table, Tag, InputNumber, Badge, Statistic, Button, notification, message } from 'antd';\r\n\r\nconst { Column } = Table;\r\n\r\ninterface IState {\r\n    dataSource: Array<IDish>\r\n    orderForm: Array<IDish>,\r\n    total: number,\r\n    seatId: string\r\n}\r\n\r\nclass AllDish extends React.Component<any, IState> {\r\n    constructor(props: any) {\r\n        super(props)\r\n        this.state = {\r\n            seatId: \"0\",\r\n            dataSource: [],\r\n            orderForm: [],\r\n            total: 0,\r\n        }\r\n        this.fetchData = this.fetchData.bind(this);\r\n        this.changeOrder = this.changeOrder.bind(this);\r\n        this.postOrder = this.postOrder.bind(this);\r\n        this.calculateTotal = this.calculateTotal.bind(this);\r\n        this.settlement = this.settlement.bind(this);\r\n        this.bindRefund = this.bindRefund.bind(this);\r\n        this.goBack = this.goBack.bind(this);\r\n    }\r\n\r\n    // 生命周期钩子\r\n    public componentDidMount() {\r\n        this.fetchData();\r\n        this.setQuerySeatId();\r\n\r\n    }\r\n\r\n    private setQuerySeatId() {\r\n        let seatId = GetQueryString(\"seatId\");\r\n        if (!seatId) {\r\n            this.goBack();\r\n            return;\r\n        }\r\n        this.setState({\r\n            seatId\r\n        })\r\n    }\r\n    // 获取后台数据\r\n    private async fetchData() {\r\n        let dataSource: IDish[] = await api.getAllDish();\r\n        let orderForm: IDish[] = await api.getOrderForm(this.state.seatId);\r\n\r\n        for (let i of orderForm) {\r\n            for (let j of dataSource) {\r\n                if (i.id == j.id) {\r\n                    j.count = i.count;\r\n                }\r\n            }\r\n        }\r\n\r\n        this.setState({\r\n            dataSource,\r\n            orderForm,\r\n        })\r\n        this.calculateTotal();\r\n    }\r\n    private countBadge() {\r\n        return (\r\n            this.state.orderForm.map((dish) => {\r\n                return <Badge key={dish.name} style={{ margin: '10px' }} count={dish.count}>\r\n                    <div style={{ height: \"12px\", fontSize: \"16px\", padding: \"16px\" }}>\r\n                        <Tag color=\"green\">{dish.name}</Tag>\r\n                    </div>\r\n                </Badge >\r\n            })\r\n        )\r\n    }\r\n    private goBack() {\r\n        window.location.replace(\"/order/choose-seat\");\r\n    }\r\n\r\n    // 计算订单的总价格\r\n    private calculateTotal() {\r\n        let total = 0;\r\n        let cache = this.state.orderForm;\r\n        for (let item of cache) {\r\n            if (item.count > 0) {\r\n                total += (item.count * item.price);\r\n            }\r\n        }\r\n        this.setState({\r\n            total\r\n        })\r\n    }\r\n\r\n    private changeOrder(e: any, dish: any) {\r\n        let cache = this.state.dataSource;\r\n        for (let item of cache) {\r\n\r\n            if (item.id === dish.id) {\r\n                item.count = parseInt(e);\r\n            }\r\n        }\r\n        this.setState({\r\n            dataSource: cache\r\n        })\r\n\r\n        // 将大于0的数据存放到订单中\r\n        let orderForm: IDish[] = [];\r\n        for (let item of cache) {\r\n            if (item.count > 0) {\r\n                orderForm.push(item);\r\n            }\r\n        }\r\n        this.setState({\r\n            orderForm,\r\n        })\r\n\r\n        this.calculateTotal();\r\n    }\r\n\r\n    private postOrder() {\r\n        if(this.state.total <= 0){\r\n            message.error(\"没有订单\");\r\n            return;\r\n        }\r\n        api.postOrder({\r\n            seatId: parseInt(this.state.seatId),\r\n            time: new Date().toLocaleString(),\r\n            total: this.state.total,\r\n            list: JSON.stringify(this.state.orderForm),\r\n        }).then((res) => {\r\n            if (res.code === \"success\") {\r\n                notification.open({\r\n                    message: 'success',\r\n                    description: '数据更新成功',\r\n                    duration: 3,\r\n                });\r\n            } else {\r\n                notification.open({\r\n                    message: 'error',\r\n                    description: '数据提交失败',\r\n                    duration: 3,\r\n                });\r\n            }\r\n        })\r\n    }\r\n\r\n    private async settlement() {\r\n        if(this.state.total <= 0){\r\n            message.error(\"没有订单\");\r\n            return;\r\n        }\r\n        let res = await api.getSeatClose(this.state.seatId);\r\n        if (res.code === \"success\") {\r\n            message.success(`成功总计￥${this.state.total}`)\r\n            setTimeout(() => {\r\n                this.goBack()\r\n            }, 2000)\r\n        }\r\n    }\r\n\r\n    private async bindRefund() {\r\n        let res = await api.getRefund(this.state.seatId);\r\n        if (res.code === \"success\") {\r\n            message.success(\"退款成功\");\r\n            setTimeout(() => {\r\n                this.goBack()\r\n            }, 2000)\r\n        }\r\n    }\r\n    render() {\r\n        return (\r\n            <article className=\"alldish\">\r\n\r\n                <section className=\"set-order-buttons\">\r\n                    <Button onClick={this.goBack}>返回</Button>\r\n                    <Button onClick={this.postOrder}>提交/修改</Button>\r\n                    <Button onClick={this.settlement}>结算并退座</Button>\r\n                    <Button type=\"danger\" onClick={this.bindRefund}>退款</Button>\r\n                </section>\r\n\r\n                <section className=\"set-order-buttons\">\r\n                    <Statistic title=\"总计￥\" value={this.state.total} />\r\n                </section>\r\n\r\n                <section className=\"order-list\">\r\n                    {this.countBadge()}\r\n                </section>\r\n\r\n\r\n                <Table\r\n                    rowKey={item => item.name}\r\n                    dataSource={this.state.dataSource}>\r\n\r\n                    <Column\r\n                        title=\"菜名\"\r\n                        dataIndex=\"name\"\r\n                        key=\"name\"\r\n                    />\r\n                    <Column\r\n                        title=\"价格\"\r\n                        dataIndex=\"price\"\r\n                        key=\"price\"\r\n                    />\r\n\r\n                    <Column\r\n                        title=\"销量\"\r\n                        dataIndex=\"salesVoluma\"\r\n                        key=\"salesVoluma\"\r\n                    />\r\n                    <Column\r\n                        title=\"类型\"\r\n                        dataIndex=\"classify\"\r\n                        key=\"classify\"\r\n                        render={tags => (\r\n                            <span>\r\n                                {<Tag color=\"blue\" key={tags}>{tags}</Tag>}\r\n                            </span>\r\n                        )}\r\n                    />\r\n                    <Column\r\n                        title=\"操作\"\r\n                        render={(text, record: IDish) => (\r\n                            <span>\r\n                                <InputNumber min={0} max={100000} defaultValue={record.count} onChange={value => { this.changeOrder(value, record) }} />\r\n                            </span>\r\n                        )}\r\n                    />\r\n                </Table>\r\n            </article>\r\n        )\r\n    }\r\n}\r\n\r\nexport default AllDish;","import React from 'react';\r\nimport AllDish from \"../../compoents/AllDish\";\r\nimport { IProps } from \"../../types/interface\";\r\nimport \"../../styles/setOrder.css\";\r\nimport { Alert, Button } from 'antd';\r\n\r\nclass SetOrder extends React.Component<IProps> {\r\n    constructor(props: IProps) {\r\n        super(props)\r\n        this.state = {\r\n        }\r\n    }\r\n\r\n    // 生命周期钩子\r\n    public componentDidMount() {\r\n        //this.ifJump();\r\n    }\r\n\r\n    // 获取url的seatId\r\n    private urlParams(): (string | null) {\r\n        let param = window.location.search;\r\n\r\n        let reg = new RegExp(`(?!seatId=)[0-9]+`);\r\n        let UrlParamSeatId = param.match(reg);\r\n\r\n        if (UrlParamSeatId == null) {\r\n            return null;\r\n        }\r\n        return UrlParamSeatId[0];\r\n    }\r\n\r\n    private jump(url = \"/order/choose-seat\") {\r\n        window.location.replace(url);\r\n    }\r\n\r\n    // 判断是否允许入座，非法用户进行跳转\r\n    private ifJump() {\r\n        let seatId = window.localStorage.getItem(\"seatId\");\r\n        let UrlParamSeatId = this.urlParams();\r\n\r\n        if (seatId == null || UrlParamSeatId == null) {\r\n            this.jump();\r\n            return;\r\n        }\r\n        if (UrlParamSeatId[0] !== seatId) {\r\n            this.jump(`/order/set-order?seatId=${seatId}`);\r\n            return;\r\n        }\r\n    }\r\n\r\n\r\n\r\n    public render(): JSX.Element {\r\n        return (\r\n            <div className=\"set-order\">\r\n                <article className=\"set-order-main\">\r\n                    <section>\r\n                        <Alert\r\n                            message=\"点餐页面\"\r\n                            //description={`￥：${this.state.total}`}\r\n                            type=\"success\"\r\n                            showIcon\r\n                        />\r\n                    </section>\r\n\r\n\r\n                    <section className=\"show-dishs\">\r\n                        <AllDish></AllDish>\r\n                    </section>\r\n\r\n                </article>\r\n\r\n            </div>\r\n        )\r\n    }\r\n}\r\n\r\n\r\nexport default SetOrder;","import React from \"react\";\r\nimport api from \"../../api\";\r\nimport { setCookie } from \"../../utils\"\r\nimport \"../../styles/login.css\";\r\n\r\ninterface IState {\r\n    userName: string,\r\n    passWord: string,\r\n}\r\n\r\n\r\nclass Login extends React.Component<any, IState> {\r\n    constructor(props: any) {\r\n        super(props)\r\n        this.state = {\r\n            userName: \"\",\r\n            passWord: \"\"\r\n        }\r\n        this.handelUserChange = this.handelUserChange.bind(this);\r\n        this.handelPasswdChange = this.handelPasswdChange.bind(this);\r\n        this.bindLoginClick = this.bindLoginClick.bind(this);\r\n    }\r\n    private async bindLoginClick() {\r\n        let res = await api.postTryLogin({\r\n            userName: this.state.userName,\r\n            passWord: this.state.passWord,\r\n        });\r\n        if (res.code === \"success\") {\r\n            setCookie(\"admin\", \"ok\");\r\n            window.location.href = \"/admin/dish-manage\";\r\n            return;\r\n        }\r\n        alert(\"错误\");\r\n\r\n    }\r\n    private handelUserChange(e: any) {\r\n        this.setState({\r\n            userName: e.currentTarget.value\r\n        })\r\n    }\r\n\r\n    private handelPasswdChange(e: any) {\r\n        this.setState({\r\n            passWord: e.currentTarget.value\r\n        })\r\n    }\r\n\r\n    render() {\r\n        return (\r\n            <div className=\"login\">\r\n                <h1 className=\"login-title\">管理员登陆页面</h1>\r\n                <section className=\"login-main\">\r\n                    <form>\r\n                        <div>\r\n                            <strong>用户</strong>\r\n                            <input className=\"login-input\" autoComplete=\"on\" onChange={this.handelUserChange} placeholder=\"UserName\" />\r\n                        </div>\r\n                        <div>\r\n                            <strong>密码</strong>\r\n                            <input className=\"login-input\" autoComplete=\"on\" onChange={this.handelPasswdChange} type=\"password\" placeholder=\"PassWorld\" />\r\n                        </div>\r\n                        <div>\r\n                            <button className=\"login-btn\" type=\"button\" onClick={this.bindLoginClick} >登陆</button>\r\n                        </div>\r\n\r\n                    </form>\r\n                </section>\r\n            </div>\r\n        )\r\n    }\r\n}\r\n\r\nexport default Login;","import React from \"react\";\r\nimport \"../styles/adminHeader.css\";\r\nimport { Link } from \"react-router-dom\";\r\n\r\n\r\nclass AdminHeader extends React.Component {\r\n    constructor(props: any) {\r\n        super(props)\r\n        this.state = {\r\n        }\r\n    }\r\n\r\n    render() {\r\n        return (\r\n            <header className=\"admin-header\">\r\n                <nav>\r\n                    {/* <Link to=\"/admin/seat-manage\">座位管理</Link> */}\r\n                    <Link to=\"/\">首页</Link>\r\n                    <Link to=\"/admin/dish-manage\">菜单管理</Link>\r\n                    <Link to=\"/admin/status-manage\">营业统计</Link>\r\n                </nav>\r\n            </header>\r\n        )\r\n    }\r\n}\r\n\r\nexport default AdminHeader;","import React from \"react\";\r\nimport \"../styles/modifyDishMenu.css\"\r\n\r\nimport { Select, Input, InputNumber, Button } from 'antd';\r\nimport api from \"../api\";\r\nconst Option = Select.Option;\r\n\r\n\r\ninterface IState {\r\n    func: number,\r\n    id: number,\r\n    price: number,\r\n    name: string,\r\n    classify: string,\r\n}\r\n\r\nclass ModifyMenu extends React.Component<any, IState> {\r\n    constructor(props: any) {\r\n        super(props)\r\n        this.state = {\r\n            func: 0,\r\n            id: -1,\r\n            price: 0,\r\n            name: \"\",\r\n            classify: \"主菜\",\r\n        }\r\n        this.handelChange = this.handelChange.bind(this);\r\n        this.handelSub = this.handelSub.bind(this);\r\n    }\r\n\r\n    private handelChange(value: any, key: string) {\r\n        //console.log(value, key);\r\n        switch (key) {\r\n            case \"func\":\r\n                this.setState({ func: value });\r\n                break;\r\n            case \"price\":\r\n                this.setState({ price: value });\r\n                break;\r\n            case \"classify\":\r\n                this.setState({ classify: value });\r\n                break;\r\n            case \"name\":\r\n                this.setState({ name: value });\r\n                break;\r\n            default:\r\n                break;\r\n        }\r\n    }\r\n\r\n    private async handelSub() {\r\n        let res = await api.postManageDish({\r\n            id: this.state.id,\r\n            classify: this.state.classify,\r\n            func: this.state.func,\r\n            name: this.state.name,\r\n            price: this.state.price,\r\n        });\r\n        if (res.code === \"success\") {\r\n            window.location.reload()\r\n        } else {\r\n            alert(\"失败\");\r\n        }\r\n    }\r\n\r\n    render() {\r\n\r\n        return (\r\n            <section className=\"modify-dish\">\r\n\r\n                <div className=\"dish-input\">\r\n                    <h3>操作：</h3>\r\n                    <Select\r\n                        style={{ width: 300 }}\r\n                        placeholder=\"选择一种操作\"\r\n                        onChange={(value: string) => { this.handelChange(parseInt(value), \"func\") }}\r\n                    >\r\n                        <Option value=\"1\">添加</Option>\r\n                        <Option value=\"0\">修改</Option>\r\n                        <Option value=\"-1\">删除</Option>\r\n                    </Select>\r\n                </div>\r\n\r\n\r\n                <div className=\"dish-input\">\r\n                    <h3>菜名：</h3>\r\n                    <Input\r\n                        onChange={(e) => { this.handelChange(e.currentTarget.value, \"name\") }}\r\n                        style={{ width: 300 }} placeholder=\"例如：皮蛋瘦肉粥\" />\r\n                </div>\r\n\r\n                <div className=\"dish-input\">\r\n                    <h3>分类：</h3>\r\n                    <Select\r\n                        style={{ width: 300 }}\r\n                        placeholder=\"菜品分类\"\r\n                        onChange={(value) => { this.handelChange(value, \"classify\") }}\r\n                    >\r\n                        <Option value=\"主食\">主食</Option>\r\n                        <Option value=\"凉菜\">凉菜</Option>\r\n                        <Option value=\"热菜\">热菜</Option>\r\n                        <Option value=\"汤类\">汤类</Option>\r\n                    </Select>\r\n                </div>\r\n\r\n                <div className=\"dish-input\">\r\n                    <h3>价格：</h3>\r\n                    <InputNumber\r\n                        data-flag=\"price\"\r\n                        style={{ width: 300 }}\r\n                        min={0}\r\n                        step={0.1}\r\n                        defaultValue={0.0}\r\n                        onChange={(value) => { this.handelChange(value, \"price\") }} />\r\n                </div>\r\n\r\n                <div className=\"dish-input dish-button\">\r\n                    <Button type=\"primary\" icon=\"thunderbolt\" onClick={this.handelSub}>\r\n                        提交！\r\n                    </Button>\r\n                </div>\r\n\r\n\r\n            </section>\r\n        )\r\n    }\r\n}\r\n\r\nexport default ModifyMenu;","import React from \"react\";\r\nimport AdminHeader from \"../../compoents/AdminHeader\"\r\nimport ModifyMenu from \"../../compoents/ModifyDishMenu\";\r\nimport AllDish from \"../../compoents/AllDish\";\r\n\r\nimport { Redirect } from \"react-router-dom\";\r\nimport { isAdmin } from \"../../utils\";\r\nimport \"../../styles/dishManage.css\";\r\n\r\nclass DishManage extends React.Component {\r\n    constructor(props: any) {\r\n        super(props)\r\n    }\r\n    render() {\r\n        if (!isAdmin()) {\r\n            return <Redirect to=\"/admin/login\"></Redirect>\r\n        }\r\n\r\n        return (\r\n            <div className=\"Manage\">\r\n                <AdminHeader />\r\n                <article className=\"dish-manage-main\">\r\n                    <ModifyMenu />\r\n\r\n                </article>\r\n            </div>\r\n        )\r\n    }\r\n}\r\n\r\nexport default DishManage;","import React from \"react\";\r\nimport AdminHeader from \"../../compoents/AdminHeader\"\r\nimport { Redirect } from \"react-router-dom\";\r\nimport { isAdmin } from \"../../utils\";\r\nimport { Statistic, Row, Col, Icon } from 'antd';\r\nimport api from \"../../api/index\";\r\nimport \"../../styles/statusManage.css\";\r\nimport { IStatus } from \"../../types/interface\"\r\n\r\nclass StatusManage extends React.Component<any, IStatus> {\r\n    constructor(props: any) {\r\n        super(props)\r\n        this.state = {\r\n            totalRevenue: 0,\r\n            subscription: 0,\r\n            refund: 0\r\n        }\r\n        this.fetchData = this.fetchData.bind(this);\r\n    }\r\n\r\n    public componentDidMount() {\r\n        this.fetchData();\r\n    }\r\n\r\n    private async fetchData() {\r\n        let res = await api.getStatus();\r\n        console.log(res);\r\n        this.setState({\r\n            totalRevenue: res.totalRevenue,\r\n            subscription: res.subscription,\r\n            refund: res.refund,\r\n        })\r\n        console.log(this.state);\r\n    }\r\n\r\n    render() {\r\n        if (!isAdmin()) {\r\n            return <Redirect to=\"/admin/login\"></Redirect>\r\n        }\r\n        return (\r\n            <div className=\"Manage\">\r\n                <AdminHeader />\r\n                <section className=\"StatusManage-grah\">\r\n                    <Row gutter={16}>\r\n                        <Col span={12}>\r\n                            <Statistic title=\"总收入\" value={this.state.totalRevenue} prefix={<Icon type=\"euro\" />} />\r\n                        </Col>\r\n                        <Col span={12}>\r\n                            <Statistic title=\"订单次数/退款\" value={this.state.subscription} suffix={`/${this.state.refund}`} />\r\n                        </Col>\r\n                    </Row>\r\n                </section>\r\n\r\n            </div>\r\n        )\r\n    }\r\n}\r\n\r\nexport default StatusManage;","import React from 'react';\r\nimport { BrowserRouter, Route, Redirect, Switch } from \"react-router-dom\";\r\nimport Home from \"./pages/Home/Home\";\r\nimport ChooseSeat from \"./pages/Order/ChooseSeat\";\r\nimport SetOrder from \"./pages/Order/SetOrder\";\r\nimport Login from \"./pages/Admin/Login\";\r\nimport DishManage from \"./pages/Admin/DishManage\"\r\nimport SeatManage from \"./pages/Admin/SeatManage\"\r\nimport StatusManage from \"./pages/Admin/StatusManage\"\r\n\r\n\r\nclass Router extends React.Component {\r\n    render() {\r\n        return (\r\n            <BrowserRouter>\r\n                <Switch>\r\n                    <Route exact path=\"/\" component={Home} />\r\n                    <Route exact path=\"/order/choose-seat\" component={ChooseSeat} />\r\n                    <Route exact path=\"/order/set-order\" component={SetOrder} />\r\n                    <Route exact path=\"/admin/login\" component={Login} />\r\n                    <Route exact path=\"/admin/dish-manage\" component={DishManage} />\r\n                    {/* <Route exact path=\"/admin/seat-manage\" component={SeatManage} /> */}\r\n                    <Route exact path=\"/admin/status-manage\" component={StatusManage} />\r\n                    <Redirect to=\"/\" />\r\n                </Switch>\r\n            </BrowserRouter>\r\n        )\r\n    }\r\n}\r\n\r\nexport default Router;","import React from 'react';\nimport Router from \"./router\";\nimport \"antd/dist/antd.css\";\n\nclass App extends React.Component {\n  render() {\n    return <Router />\n  }\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './styles/index.css';\nimport App from './App';\n\nReactDOM.render(<App />, document.getElementById('root'));\n\n"],"sourceRoot":""}